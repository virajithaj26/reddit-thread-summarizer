# ü§ñ Reddit Thread Summarizer 

An **end-to-end automation system** built using **n8n**, this project automatically summarizes Reddit threads and delivers concise summaries via **Telegram**, while storing all processed data into **Google Sheets** for tracking and analysis.  

It streamlines Reddit data processing ‚Äî from **thread fetching** to **summary generation**, **Telegram delivery**, and **data persistence**, ensuring a smooth and intelligent workflow with minimal human input.

---

## üöÄ High-Level Overview  

The **Reddit Thread Summarizer** acts as an intelligent automation pipeline combining **data retrieval**, **AI summarization**, and **notification delivery**.  

### Workflow at a Glance:
1. **User Interaction (Telegram Input):**  
   A user sends a Reddit thread link to the Telegram bot.  

2. **Data Fetching (Reddit API):**  
   The bot passes the link to n8n, which calls the Reddit API using OAuth2 to retrieve the **post title**, **post content**, and **comments**.  

3. **Orchestrator Workflow:**  
   A central workflow handles the order of execution ‚Äî fetching data, processing summaries, and updating outputs sequentially.  

4. **Summarization Logic:**  
   Comments are cleaned, filtered (bot removal, upvote-based ranking), and summarized into digestible key points using text processing and AI summarization logic inside n8n‚Äôs **Function** node.  

5. **Storage (Google Sheets Integration):**  
   The summarized data is appended to a Google Sheet with columns:  
   - **Date**  
   - **Post Title**  
   - **Subreddit**  
   - **Thread Summary**

6. **Delivery (Telegram Output):**  
   The final summary is formatted and sent back to the user via Telegram, completing the automated loop.

---

## ‚öôÔ∏è Low-Level Technical Details  

| Component | Description |
|------------|-------------|
| **Platform** | [n8n](https://n8n.io/) ‚Äì workflow automation platform |
| **Language** | JavaScript (for logic and summarization) |
| **Data Source** | Reddit API with OAuth2 authentication |
| **Storage** | Google Sheets via Google API |
| **Messaging Service** | Telegram Bot API |
| **Nodes Used** | Telegram Trigger, HTTP Request, Function, Merge, Set, Google Sheets, Telegram Send Message |
| **Auth** | Reddit OAuth2 + Telegram API key + Google OAuth2 credentials |

---

## üß© Workflow Breakdown  

1. **Telegram Trigger Node**  
   - Listens for messages from the bot.  
   - Extracts the Reddit post URL from user input.  

2. **HTTP Request (Fetch Reddit Post)**  
   - Calls Reddit‚Äôs API endpoint using OAuth2.  
   - Extracts `post_title`, `subreddit`, and `selftext`.  

3. **HTTP Request (Fetch Comments)**  
   - Requests comments JSON data from Reddit‚Äôs `.json` endpoint.  
   - Filters and parses comment bodies.  

4. **Function Node (Summarization Logic)**  
   - Merges post and comment data.  
   - Summarizes comments into a concise version of the thread.  

   ```javascript
   const summary = comments
     .slice(0, 20)
     .map(c => c.body)
     .join(" ")
     .replace(/\n/g, " ");
   return [{ json: { summary } }];
   Merge Node (Combine Post + Summary)


5.**Google Sheets Node (Append Row)**

Appends a new row with:

| Field | Value |
|--------|--------|
| Date | `new Date().toLocaleDateString()` |
| Post Title | Extracted from Reddit |
| Subreddit | Extracted from URL |
| Summary | Generated by summarization function |

6. **Telegram Send Message Node**

Sends a message with:

- Post title  
- Subreddit  
- Summarized content  

---

## üß† Orchestrator Workflow

The Orchestrator Workflow ensures every subflow executes in order and handles failures gracefully.

**Responsibilities:**

- Implement **token-aware chunking** for long comment threads
- - Prevent partial or incomplete summaries from being sent
- Control the execution order of subflows

---

## üß∞ Tech Stack

| Component | Purpose |
|----------|---------|
| **n8n** | Workflow orchestration and automation |
| **Reddit API** | Data source (posts + comments) |
| **Telegram Bot API** | Sends final summary back to user |
| **Google Sheets API** | Persistent logging of results |
| **JavaScript** | Data transform & comment summarization |
| **OAuth2 Authentication** | Secure credentials |

---

## üß© Flow Diagram

<img width="1060" height="1704" alt="image" src="https://github.com/user-attachments/assets/f4dd7415-0047-4142-98b7-5b2ab1c9daad" />





Workflow Preview:
<img width="1800" height="976" alt="image" src="https://github.com/user-attachments/assets/c14f83b3-3e5f-448f-b24a-5fc02059b709" />


Telegram Output Example:
<img width="1585" height="872" alt="initial_thread_capture" src="https://github.com/user-attachments/assets/146b744e-7a38-4381-be43-f8ee45f5fb07" />
<img width="1590" height="931" alt="telegram_reply" src="https://github.com/user-attachments/assets/3ecaf4ed-d5aa-442f-adb2-8659c408742d" />



Google Sheets Logging:
<img width="1911" height="469" alt="google_sheets_output" src="https://github.com/user-attachments/assets/bacb110f-5540-4a3e-bc0a-b3f9779dfabd" />


[Workflow execution](https://drive.google.com/file/d/1jtWqOUhfS0k7d-ZElRkvakD5uAVjg3Yf/view?usp=sharing)



[Presentation](https://www.canva.com/design/DAG3XHdc91M/ZD8kwTbHUea7u0xs5I3Bzw/edit?utm_content=DAG3XHdc91M&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton)

## ‚ú® **How to Use the Bot**

1. **Open the bot on Telegram**  
   üëâ https://t.me/reddit_thread_summarizer_bot

2. **Paste a Reddit URL in the chat**  
   Example: 
   https://www.reddit.com/r/technology/comments/abcd123/some_reddit_post/

3. **Wait a few seconds ‚è≥**  
The bot will fetch the post and comments.

4. ‚úÖ **You will receive:**  
- üìå **Post Summary**
- üí¨ **Comment Summary (thread insights)**
